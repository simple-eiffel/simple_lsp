<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simple_lsp - Eiffel LSP for VS Code</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="images/logo.png">
</head>
<body>
    <header>
        <div class="logo-container">
            <img src="https://raw.githubusercontent.com/simple-eiffel/claude_eiffel_op_docs/main/artwork/LOGO.png" alt="simple_* logo" class="logo">
        </div>
        <h1>simple_lsp</h1>
        <p class="tagline">Eiffel Language Server Protocol for VS Code</p>
        <div class="badges">
            <span class="badge badge-version">v0.1.0</span>
            <span class="badge badge-license">MIT</span>
            <span class="badge badge-status">Beta</span>
        </div>
    </header>

    <nav>
        <ul>
            <li><a href="#overview">Overview</a></li>
            <li><a href="#features">Features</a></li>
            <li><a href="#quick-start">Quick Start</a></li>
            <li><a href="#roadmap">Roadmap</a></li>
            <li><a href="https://github.com/simple-eiffel/simple_lsp">GitHub</a></li>
        </ul>
    </nav>

    <main>
        <section id="overview">
            <h2>Overview</h2>
            <p>
                <strong>simple_lsp</strong> brings modern IDE features to Eiffel development in Visual Studio Code.
                Built with the <a href="https://github.com/simple-eiffel">Simple Eiffel</a> ecosystem,
                it provides intelligent code navigation, completion, and documentation features.
            </p>
            <p>
                The LSP server is written entirely in Eiffel using Design by Contract principles,
                providing robust and reliable language services. Part of the <strong>simple_*</strong>
                ecosystem of focused, single-purpose Eiffel libraries.
            </p>
        </section>

        <section id="features">
            <h2>Current Features</h2>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Go to Definition</h4>
                    <p>Ctrl+Click on any class or feature name to jump directly to its definition.</p>
                </div>
                <div class="feature-card">
                    <h4>Hover Documentation</h4>
                    <p>Hover over identifiers to see feature signatures, contracts, and comments.</p>
                </div>
                <div class="feature-card">
                    <h4>Code Completion</h4>
                    <p>Ctrl+Space for intelligent autocomplete of classes and features.</p>
                </div>
                <div class="feature-card">
                    <h4>Document Symbols</h4>
                    <p>Ctrl+Shift+O to see an outline of features in the current file.</p>
                </div>
                <div class="feature-card">
                    <h4>Workspace Symbols</h4>
                    <p>Ctrl+T to search for any symbol across your entire workspace.</p>
                </div>
                <div class="feature-card">
                    <h4>Find References</h4>
                    <p>Shift+F12 to find all definitions of a symbol.</p>
                </div>
            </div>
        </section>

        <section id="quick-start">
            <h2>Quick Start</h2>

            <div class="quick-start">
                <h3>Windows Installer (Recommended)</h3>
                <ol>
                    <li>Download <code>simple_lsp_setup_0.1.0.exe</code> from
                        <a href="https://github.com/simple-eiffel/simple_lsp/releases">Releases</a></li>
                    <li>Run the installer</li>
                    <li>Open VS Code with any folder containing <code>.e</code> files</li>
                    <li>Start coding!</li>
                </ol>
            </div>

            <h3>Manual Installation</h3>
            <ol>
                <li>Download and extract the release archive</li>
                <li>Copy <code>simple_lsp.exe</code> to a permanent location</li>
                <li>Set the <code>SIMPLE_LSP</code> environment variable:
<pre><code>setx SIMPLE_LSP "C:\tools\simple_lsp"</code></pre>
                </li>
                <li>Install the VS Code extension from the included <code>.vsix</code> file</li>
            </ol>

            <h3>VS Code Configuration</h3>
            <p>The extension automatically finds the LSP server. To configure manually:</p>
<pre><code>{
    "eiffel.lsp.serverPath": "C:/path/to/simple_lsp.exe"
}</code></pre>
        </section>

        <section id="how-it-works">
            <h2>How It Works</h2>
            <ol>
                <li>VS Code launches <code>simple_lsp.exe</code> when you open an Eiffel file</li>
                <li>The server parses and indexes all <code>.e</code> files in your workspace</li>
                <li>Symbol information is stored in <code>.eiffel_lsp/symbols.db</code> (SQLite)</li>
                <li>The server responds to LSP requests (hover, definition, completion, etc.)</li>
                <li>Debug logs are written to <code>.eiffel_lsp/lsp.log</code></li>
            </ol>
        </section>

        <section id="roadmap">
            <h2>Roadmap: Coming Soon</h2>
            <p>simple_lsp is under active development. Here's what we're building:</p>

            <h3>Core LSP Features (In Progress)</h3>
            <div class="roadmap-item planned">
                <h4>Rename Symbol</h4>
                <p>Safely rename features and classes across your entire workspace.</p>
            </div>
            <div class="roadmap-item planned">
                <h4>Signature Help</h4>
                <p>Show parameter hints and types while typing function calls.</p>
            </div>
            <div class="roadmap-item planned">
                <h4>Diagnostics</h4>
                <p>Real-time syntax error highlighting as you type.</p>
            </div>
            <div class="roadmap-item planned">
                <h4>Formatting</h4>
                <p>Auto-format Eiffel code on save with configurable style.</p>
            </div>

            <h3>Eiffel-Specific Innovations</h3>
            <p>Features that leverage Eiffel's unique Design by Contract capabilities:</p>
            <div class="feature-grid">
                <div class="feature-card">
                    <h4>Contract Lens</h4>
                    <p>CodeLens showing contract coverage per feature.</p>
                </div>
                <div class="feature-card">
                    <h4>Invariant Inspector</h4>
                    <p>Hover over any class to see the full invariant chain.</p>
                </div>
                <div class="feature-card">
                    <h4>Void-Safety Hints</h4>
                    <p>Inline hints showing detachable/attached status.</p>
                </div>
                <div class="feature-card">
                    <h4>Feature Origin</h4>
                    <p>See which ancestor introduced or redefined a feature.</p>
                </div>
            </div>

            <h3>simple_* Ecosystem Integration</h3>
            <ul>
                <li><strong>AI Code Assistant</strong> (simple_ai_client) - Claude-powered suggestions</li>
                <li><strong>Live File Watching</strong> (simple_watcher) - Instant re-indexing</li>
                <li><strong>Project Knowledge Base</strong> (simple_oracle) - Learn your patterns</li>
                <li><strong>Test Runner</strong> (simple_testing) - Run tests from VS Code</li>
                <li><strong>Build Integration</strong> (simple_process) - Compile from VS Code</li>
            </ul>

            <h3>Visionary Features (Research)</h3>
            <div class="roadmap-item research">
                <h4>Contract-Driven Completion</h4>
                <p>Suggest code that satisfies postconditions.</p>
            </div>
            <div class="roadmap-item research">
                <h4>AI Contract Synthesis</h4>
                <p>Generate contracts from natural language specs.</p>
            </div>
            <div class="roadmap-item research">
                <h4>Oracle-Powered Search</h4>
                <p>Natural language queries like "find all features that modify balance".</p>
            </div>
        </section>

        <section id="api">
            <h2>API Design</h2>
            <p>simple_lsp follows Design by Contract principles:</p>

            <div class="api-section">
                <h3>handle_hover</h3>
                <div class="signature">handle_hover (a_params: JSON_OBJECT): detachable JSON_OBJECT</div>
                <p>Handle textDocument/hover request - returns hover content for position.</p>
                <div class="contracts">
                    <h4>Contracts</h4>
                    <div class="require">require: a_params /= Void and a_params.has_key ("position")</div>
                    <div class="ensure">ensure: Result /= Void implies Result.has_key ("contents")</div>
                </div>
            </div>
        </section>

        <section id="building">
            <h2>Building from Source</h2>
            <h3>Prerequisites</h3>
            <ul>
                <li>EiffelStudio 25.02+</li>
                <li>Visual Studio 2022 (for C compilation)</li>
                <li>Node.js 18+ (for VS Code extension)</li>
            </ul>

            <h3>Build Commands</h3>
<pre><code><span class="comment"># Set environment variables for simple_* libraries</span>
<span class="keyword">export</span> SIMPLE_JSON=/path/to/simple_json
<span class="keyword">export</span> SIMPLE_SQL=/path/to/simple_sql
<span class="comment"># ... etc</span>

<span class="comment"># Compile LSP server (finalized with contracts)</span>
<span class="keyword">cd</span> /path/to/simple_lsp
ec.exe -batch -config simple_lsp.ecf -target simple_lsp_exe -finalize -keep -c_compile

<span class="comment"># Build VS Code extension</span>
<span class="keyword">cd</span> vscode-extension
npm install && npm run compile && npx vsce package</code></pre>
        </section>
    </main>

    <footer>
        <p>&copy; 2025 simple_* ecosystem. MIT License.</p>
        <p>
            <a href="https://github.com/simple-eiffel/simple_lsp">GitHub</a> |
            <a href="https://simple-eiffel.github.io">Documentation</a> |
            <a href="https://www.eiffel.org">Eiffel Language</a>
        </p>
    </footer>
</body>
</html>
